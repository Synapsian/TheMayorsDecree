[gd_scene load_steps=30 format=4 uid="uid://bkeivelcqfgfo"]

[ext_resource type="PackedScene" uid="uid://trnr05ftt3c8" path="res://scenes/player.tscn" id="1_g00bn"]
[ext_resource type="Texture2D" uid="uid://bjme7yxj85j1w" path="res://tiles/brick.png" id="2_e2gc0"]
[ext_resource type="Texture2D" uid="uid://crn0k306qo2wn" path="res://tiles/grass.png" id="3_nkaua"]
[ext_resource type="Texture2D" uid="uid://dsdrrgvusahqn" path="res://tiles/town_hall_marble.png" id="4_d0fr2"]
[ext_resource type="Texture2D" uid="uid://cumkuouqirfgj" path="res://tiles/table.png" id="4_fsf13"]
[ext_resource type="Texture2D" uid="uid://bx7pqdahjw5pv" path="res://tiles/temp_tileset.png" id="5_repwb"]
[ext_resource type="Texture2D" uid="uid://dc3dxyuvkuouc" path="res://tiles/chair.png" id="6_6mnh3"]
[ext_resource type="Texture2D" uid="uid://dvucpb78fbtmb" path="res://tiles/wood.png" id="7_2o7xi"]
[ext_resource type="Texture2D" uid="uid://dy5cgr3ujiuuc" path="res://tiles/dirt.png" id="8_cmre7"]
[ext_resource type="Texture2D" uid="uid://38qmkmfx20bm" path="res://tiles/door-pixilart.png" id="9_m2tjr"]
[ext_resource type="Texture2D" uid="uid://dtn77wmadmipi" path="res://tiles/THRONE.png" id="10_m2tjr"]
[ext_resource type="Texture2D" uid="uid://cv7mbbpd84lih" path="res://sprites/parallax/sky.png" id="11_ib0vl"]
[ext_resource type="Texture2D" uid="uid://csuacr148jq7n" path="res://sprites/parallax/layer2fix.png" id="12_l64x6"]
[ext_resource type="Texture2D" uid="uid://bas6hhgc6p7f1" path="res://sprites/parallax/layer1.png" id="13_wepko"]
[ext_resource type="PackedScene" uid="uid://o0plor4y2d4j" path="res://transition.tscn" id="14_wd708"]
[ext_resource type="PackedScene" uid="uid://cfv5dv5mfyfrj" path="res://scenes/npc.tscn" id="14_y2xma"]
[ext_resource type="Script" uid="uid://bmq8g4bd37hah" path="res://scenes/chair.gd" id="16_6tfbc"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_jokv8"]
texture = ExtResource("2_e2gc0")
texture_region_size = Vector2i(128, 128)
0:0/0 = 0

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_ixtnu"]
texture = ExtResource("3_nkaua")
texture_region_size = Vector2i(128, 128)
0:0/0 = 0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_7lr2g"]
texture = ExtResource("4_d0fr2")
texture_region_size = Vector2i(128, 128)
0:0/0 = 0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_3gctl"]
texture = ExtResource("4_fsf13")
texture_region_size = Vector2i(128, 128)
0:0/0 = 0

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_vcn4u"]
texture = ExtResource("5_repwb")
texture_region_size = Vector2i(64, 64)
7:4/size_in_atlas = Vector2i(2, 1)
7:4/0 = 0
7:4/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, 32, 64, 32, 64, -32, -64, -32)
10:4/size_in_atlas = Vector2i(2, 1)
10:4/0 = 0
10:4/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, 32, 64, 32, 64, -32, -64, -32)
19:4/size_in_atlas = Vector2i(2, 2)
19:4/0 = 0
1:4/size_in_atlas = Vector2i(2, 2)
1:4/0 = 0
1:4/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
4:4/size_in_atlas = Vector2i(2, 2)
4:4/0 = 0
4:4/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
13:5/size_in_atlas = Vector2i(2, 1)
13:5/0 = 0
13:5/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, 32, 64, 32, 64, -32, -64, -32)
16:4/size_in_atlas = Vector2i(2, 2)
16:4/0 = 0
19:1/size_in_atlas = Vector2i(2, 2)
19:1/0 = 0
19:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
16:1/size_in_atlas = Vector2i(2, 2)
16:1/0 = 0
13:1/size_in_atlas = Vector2i(2, 2)
13:1/0 = 0
10:1/size_in_atlas = Vector2i(2, 2)
10:1/0 = 0
10:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
7:1/size_in_atlas = Vector2i(2, 2)
7:1/0 = 0
7:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
4:1/size_in_atlas = Vector2i(2, 2)
4:1/0 = 0
4:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
1:1/size_in_atlas = Vector2i(2, 2)
1:1/0 = 0
1:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
1:7/size_in_atlas = Vector2i(2, 2)
1:7/0 = 0

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_xd1w5"]
texture = ExtResource("6_6mnh3")
texture_region_size = Vector2i(128, 128)
0:0/0 = 0

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_dp7yw"]
texture = ExtResource("7_2o7xi")
texture_region_size = Vector2i(128, 128)
0:0/0 = 0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_lm1sv"]
texture = ExtResource("8_cmre7")
texture_region_size = Vector2i(128, 128)
0:0/0 = 0

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_6tfbc"]
texture = ExtResource("9_m2tjr")
texture_region_size = Vector2i(128, 128)
1:0/0 = 0
0:0/0 = 0
0:1/0 = 0
1:1/0 = 0

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_d0fr2"]
texture = ExtResource("10_m2tjr")
texture_region_size = Vector2i(128, 128)
0:0/0 = 0
0:0/0/z_index = 10
1:0/0 = 0
1:0/0/z_index = 10
0:1/0 = 0
0:1/0/z_index = 10
1:1/0 = 0
1:1/0/z_index = 10

[sub_resource type="TileSet" id="TileSet_2m72k"]
tile_size = Vector2i(128, 128)
physics_layer_0/collision_layer = 1
sources/3 = SubResource("TileSetAtlasSource_vcn4u")
sources/0 = SubResource("TileSetAtlasSource_jokv8")
sources/1 = SubResource("TileSetAtlasSource_ixtnu")
sources/2 = SubResource("TileSetAtlasSource_3gctl")
sources/4 = SubResource("TileSetAtlasSource_xd1w5")
sources/5 = SubResource("TileSetAtlasSource_dp7yw")
sources/6 = SubResource("TileSetAtlasSource_lm1sv")
sources/7 = SubResource("TileSetAtlasSource_6tfbc")
sources/8 = SubResource("TileSetAtlasSource_d0fr2")
sources/10 = SubResource("TileSetAtlasSource_7lr2g")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_d0fr2"]
size = Vector2(198, 236)

[node name="world_mayor" type="Node2D"]

[node name="character" parent="." instance=ExtResource("1_g00bn")]
z_index = 5
position = Vector2(57, 420)
metadata/transition_debounce = false
metadata/anchored = false
metadata/money = 1000.0
metadata/money_to_earn = 100.0

[node name="TileMapLayer" type="TileMapLayer" parent="."]
position = Vector2(135, 245)
tile_map_data = PackedByteArray("AAAAAAQAAQAAAAAAAAD//wQAAQAAAAAAAAABAAQAAQAAAAAAAAD+/wQAAQAAAAAAAAACAAQAAQAAAAAAAAADAAQAAQAAAAAAAAAEAAQAAQAAAAAAAAD9/wQAAQAAAAAAAAD8/wQAAQAAAAAAAAAFAAQAAQAAAAAAAAAGAAQAAQAAAAAAAAAHAAQAAQAAAAAAAAAIAAQAAQAAAAAAAAAJAAQAAQAAAAAAAAAKAAQAAQAAAAAAAAALAAQAAQAAAAAAAAD7/wQAAQAAAAAAAAD6/wQAAQAAAAAAAAD5/wQAAQAAAAAAAAD4/wQAAQAAAAAAAAD3/wQAAQAAAAAAAAAIAOr/CgAAAAAAAAAHAOr/CgAAAAAAAAAGAOr/CgAAAAAAAAAFAOr/CgAAAAAAAAAEAOr/CgAAAAAAAAADAOr/CgAAAAAAAAACAOr/CgAAAAAAAAABAOr/CgAAAAAAAAAAAOr/CgAAAAAAAAAMAOb/CgAAAAAAAAAMAOf/CgAAAAAAAAAMAOj/CgAAAAAAAAAMAOn/CgAAAAAAAAAMAOr/CgAAAAAAAAALAOr/CgAAAAAAAAAKAOr/CgAAAAAAAAAJAOr/CgAAAAAAAAAHAAMAAAAAAAAAAAAIAAMABwAAAAEAAAAJAAMABwABAAEAAAAKAAMAAAAAAAAAAAAKAAIAAAAAAAAAAAAJAAIABwABAAAAAAAIAAIABwAAAAAAAAAHAAIAAAAAAAAAAAAHAAEAAAAAAAAAAAAIAAEAAAAAAAAAAAAJAAEAAAAAAAAAAAAKAAEAAAAAAAAAAAD+/+b/CgAAAAAAAAD+/+f/CgAAAAAAAAD+/+j/CgAAAAAAAAD+/+n/CgAAAAAAAAD+/+r/CgAAAAAAAAD//+r/CgAAAAAAAAD//+b/CgAAAAAAAAAAAOb/CgAAAAAAAAABAOb/CgAAAAAAAAACAOb/CgAAAAAAAAADAOb/CgAAAAAAAAAEAOb/CgAAAAAAAAAFAOb/CgAAAAAAAAAGAOb/CgAAAAAAAAAHAOb/CgAAAAAAAAAIAOb/CgAAAAAAAAAJAOb/CgAAAAAAAAAKAOb/CgAAAAAAAAALAOb/CgAAAAAAAAANAOb/CgAAAAAAAAANAOf/CgAAAAAAAAANAOj/CgAAAAAAAAANAOn/CgAAAAAAAAANAOr/CgAAAAAAAAAOAOr/CgAAAAAAAAAOAOv/CgAAAAAAAAANAOv/CgAAAAAAAAAMAOv/CgAAAAAAAAALAOv/CgAAAAAAAAAKAOv/CgAAAAAAAAAJAOv/CgAAAAAAAAAIAOv/CgAAAAAAAAAHAOv/CgAAAAAAAAAGAOv/CgAAAAAAAAAFAOv/CgAAAAAAAAAEAOv/CgAAAAAAAAADAOv/CgAAAAAAAAACAOv/CgAAAAAAAAABAOv/CgAAAAAAAAAAAOv/CgAAAAAAAAD//+v/CgAAAAAAAAD+/+v/CgAAAAAAAAD9/+v/CgAAAAAAAAD9/+r/CgAAAAAAAAD9/+n/CgAAAAAAAAD9/+j/CgAAAAAAAAD9/+f/CgAAAAAAAAD9/+b/CgAAAAAAAAD9/+X/CgAAAAAAAAD+/+X/CgAAAAAAAAD//+X/CgAAAAAAAAAAAOX/CgAAAAAAAAABAOX/CgAAAAAAAAACAOX/CgAAAAAAAAADAOX/CgAAAAAAAAAEAOX/CgAAAAAAAAAFAOX/CgAAAAAAAAAGAOX/CgAAAAAAAAAHAOX/CgAAAAAAAAAIAOX/CgAAAAAAAAAJAOX/CgAAAAAAAAAKAOX/CgAAAAAAAAALAOX/CgAAAAAAAAAMAOX/CgAAAAAAAAANAOX/CgAAAAAAAAAOAOX/CgAAAAAAAAAOAOb/CgAAAAAAAAAOAOf/CgAAAAAAAAAOAOj/CgAAAAAAAAAOAOn/CgAAAAAAAAD7/+j/CgAAAAAAAAD7/+n/CgAAAAAAAAD7/+r/CgAAAAAAAAD7/+v/CgAAAAAAAAD7/+z/CgAAAAAAAAD7/+3/CgAAAAAAAAD8/+3/CgAAAAAAAAD9/+3/CgAAAAAAAAD+/+3/CgAAAAAAAAD//+3/CgAAAAAAAAAAAO3/CgAAAAAAAAABAO3/CgAAAAAAAAACAO3/CgAAAAAAAAADAO3/CgAAAAAAAAAEAO3/CgAAAAAAAAAFAO3/CgAAAAAAAAAGAO3/CgAAAAAAAAAHAO3/CgAAAAAAAAAIAO3/CgAAAAAAAAAJAO3/CgAAAAAAAAAKAO3/CgAAAAAAAAALAO3/CgAAAAAAAAAMAO3/CgAAAAAAAAANAO3/CgAAAAAAAAAOAO3/CgAAAAAAAAAPAO3/CgAAAAAAAAAQAO3/CgAAAAAAAAAQAOz/CgAAAAAAAAAQAOv/CgAAAAAAAAAQAOr/CgAAAAAAAAAQAOn/CgAAAAAAAAAQAOj/CgAAAAAAAAAQAOf/CgAAAAAAAAAQAOb/CgAAAAAAAAAQAOX/CgAAAAAAAAAQAOT/CgAAAAAAAAAQAOP/CgAAAAAAAAAPAOP/CgAAAAAAAAAOAOP/CgAAAAAAAAANAOP/CgAAAAAAAAAMAOP/CgAAAAAAAAALAOP/CgAAAAAAAAAKAOP/CgAAAAAAAAAJAOP/CgAAAAAAAAAIAOP/CgAAAAAAAAAHAOP/CgAAAAAAAAAGAOP/CgAAAAAAAAAFAOP/CgAAAAAAAAAEAOP/CgAAAAAAAAADAOP/CgAAAAAAAAACAOP/CgAAAAAAAAABAOP/CgAAAAAAAAAAAOP/CgAAAAAAAAD//+P/CgAAAAAAAAD+/+P/CgAAAAAAAAD9/+P/CgAAAAAAAAD8/+P/CgAAAAAAAAD7/+P/CgAAAAAAAAD7/+T/CgAAAAAAAAD7/+X/CgAAAAAAAAD7/+b/CgAAAAAAAAD7/+f/CgAAAAAAAAD9/+z/CgAAAAAAAAD8/+z/CgAAAAAAAAD8/+v/CgAAAAAAAAD8/+r/CgAAAAAAAAD8/+n/CgAAAAAAAAD8/+j/CgAAAAAAAAD8/+f/CgAAAAAAAAD8/+b/CgAAAAAAAAD8/+X/CgAAAAAAAAD8/+T/CgAAAAAAAAD9/+T/CgAAAAAAAAD+/+T/CgAAAAAAAAD//+T/CgAAAAAAAAAAAOT/CgAAAAAAAAABAOT/CgAAAAAAAAACAOT/CgAAAAAAAAADAOT/CgAAAAAAAAAEAOT/CgAAAAAAAAAFAOT/CgAAAAAAAAAGAOT/CgAAAAAAAAAHAOT/CgAAAAAAAAAIAOT/CgAAAAAAAAAJAOT/CgAAAAAAAAAKAOT/CgAAAAAAAAALAOT/CgAAAAAAAAAMAOT/CgAAAAAAAAANAOT/CgAAAAAAAAAOAOT/CgAAAAAAAAAPAOT/CgAAAAAAAAAPAOX/CgAAAAAAAAAPAOb/CgAAAAAAAAAPAOf/CgAAAAAAAAAPAOj/CgAAAAAAAAAPAOn/CgAAAAAAAAAPAOr/CgAAAAAAAAAPAOv/CgAAAAAAAAAPAOz/CgAAAAAAAAAOAOz/CgAAAAAAAAANAOz/CgAAAAAAAAAMAOz/CgAAAAAAAAALAOz/CgAAAAAAAAAKAOz/CgAAAAAAAAAJAOz/CgAAAAAAAAAIAOz/CgAAAAAAAAAHAOz/CgAAAAAAAAAGAOz/CgAAAAAAAAAFAOz/CgAAAAAAAAAEAOz/CgAAAAAAAAADAOz/CgAAAAAAAAACAOz/CgAAAAAAAAABAOz/CgAAAAAAAAAAAOz/CgAAAAAAAAD//+z/CgAAAAAAAAD+/+z/CgAAAAAAAAALAAUABgAAAAAAAAAKAAUABgAAAAAAAAAJAAUABgAAAAAAAAAIAAUABgAAAAAAAAAHAAUABgAAAAAAAAAGAAUABgAAAAAAAAAFAAUABgAAAAAAAAAEAAUABgAAAAAAAAADAAUABgAAAAAAAAACAAUABgAAAAAAAAABAAUABgAAAAAAAAAAAAUABgAAAAAAAAD//wUABgAAAAAAAAD+/wUABgAAAAAAAAD9/wUABgAAAAAAAAD8/wUABgAAAAAAAAD7/wUABgAAAAAAAAD6/wUABgAAAAAAAAD5/wUABgAAAAAAAAD4/wUABgAAAAAAAAD3/wUABgAAAAAAAAD3/wYABgAAAAAAAAD4/wYABgAAAAAAAAD5/wYABgAAAAAAAAD6/wYABgAAAAAAAAD7/wYABgAAAAAAAAD8/wYABgAAAAAAAAD9/wYABgAAAAAAAAD+/wYABgAAAAAAAAD//wYABgAAAAAAAAAAAAYABgAAAAAAAAABAAYABgAAAAAAAAACAAYABgAAAAAAAAADAAYABgAAAAAAAAAEAAYABgAAAAAAAAAFAAYABgAAAAAAAAAGAAYABgAAAAAAAAAHAAYABgAAAAAAAAAIAAYABgAAAAAAAAAJAAYABgAAAAAAAAAKAAYABgAAAAAAAAALAAYABgAAAAAAAAAAAOn/BwAAAAEAAAAAAOj/BwAAAAAAAAAKAOn/CAABAAEAABALAOj/CAAAAAAAABALAOn/CAAAAAEAABAKAOj/CAABAAAAABA=")
tile_set = SubResource("TileSet_2m72k")

[node name="outside_parralax" type="ParallaxBackground" parent="."]

[node name="Sky" type="ParallaxLayer" parent="outside_parralax"]
motion_mirroring = Vector2(2000, 0)

[node name="Sprite2D" type="Sprite2D" parent="outside_parralax/Sky"]
scale = Vector2(2, 2)
texture = ExtResource("11_ib0vl")

[node name="Layer2" type="ParallaxLayer" parent="outside_parralax"]
motion_scale = Vector2(0.5, 0.5)
motion_mirroring = Vector2(2000, 0)

[node name="Sprite2D" type="Sprite2D" parent="outside_parralax/Layer2"]
scale = Vector2(2, 2)
texture = ExtResource("12_l64x6")

[node name="Layer1" type="ParallaxLayer" parent="outside_parralax"]
motion_mirroring = Vector2(2000, 0)

[node name="Sprite2D" type="Sprite2D" parent="outside_parralax/Layer1"]
scale = Vector2(2, 2)
texture = ExtResource("13_wepko")

[node name="NPC" parent="." instance=ExtResource("14_y2xma")]
position = Vector2(578, 691)
scale = Vector2(2, 2)
metadata/DialoguePath = "res://dialogues/test_npc.json"
metadata/DialogueSpeed = 1.0

[node name="ColorRect" type="ColorRect" parent="."]
z_index = -5
offset_left = -100.0
offset_top = -3047.0
offset_right = 1747.0
offset_bottom = -2519.0
color = Color(0, 0, 0, 1)

[node name="Transition" parent="." instance=ExtResource("14_wd708")]
position = Vector2(1287, 639)

[node name="chair" type="Area2D" parent="."]
script = ExtResource("16_6tfbc")

[node name="hitbox" type="CollisionShape2D" parent="chair"]
position = Vector2(1568, -2690)
shape = SubResource("RectangleShape2D_d0fr2")
metadata/PlayerInside = false

[connection signal="set_position" from="Transition" to="character" method="_on_transition_set_position"]
[connection signal="body_entered" from="chair" to="chair" method="_on_body_entered"]
[connection signal="body_exited" from="chair" to="chair" method="_on_body_exited"]
[connection signal="throne_used" from="chair" to="Transition" method="_on_chair_throne_used"]
